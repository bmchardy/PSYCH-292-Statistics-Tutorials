---
title: 'PSYCH 292: Hypothesis Testing'
author: "Bobby McHardy, for the University of Waterloo Psychology Society"
date: "October 12, 2020"
output:
  html_document:
    df_print: paged
    toc: true
    toc_float: true
    toc_collapsed: true
    toc_depth: 3
    number_sections: true
---

```{r preppack, include=FALSE}
rm(list = ls(all.names = TRUE)) #will clear all objects includes hidden objects.
gc()
library("tibble")
library(plyr)
library(dplyr)
library(tidyr)
library(ggplot2)
library(gridExtra)
library(corrplot)
```
```{r dataload, echo=FALSE}
# set the working directory for this project; this is where the data is located
setwd("C:/Users/26hmk/Documents/GitHub/PSYCH-292-Statistics-Tutorials")
```

In this PSYCH 292 tutorial, we are going to focus on t-tests. We'll introduce the essential concepts as we walk through a pratical example.

While most of the focus of this tutorial will be on statisics, we'll also look at how we can perform these calculations in a statistical programming language called "R". I'll put the "**Using R**" heading throughout the tutorial to denote optional information about the "R" programming language! Enjoy :)

# Our Data

We'll be conducting our t-tests on a dataset of N = 18 participants. These (example) data describe the experiences of our 18 participants in an experiment about Music Genres and Well-Being.

## Experimental Procedure

We randomly asked 18 students in our PSYCH 292 class to participate. Each participant in the *experiment* began by reporting their *baseline* (initial) Well-Being score. Well-Being was *operationalized* as a *self-report* measure of their perceived health and happiness. Participants rated their Well-Being on a score from 1 (A very low Well-Being) to 7 (A very high Well-Being). Participants were also asked to report the number of coffees that they drink on an average day because we think that Coffee Consumption might be a *predictor* variable of one's Well-Being. Knowing how much coffee each participant drinks per day allows us to *control for* Coffee Consumption.

After we measured our *baseline* Well-Being score and asked about Coffee Consumption, we began the *experimental manipulation*. The *indepenent (manipulated) variable* is Music Genre. We *randomly assigned* each participant to one of three Music Genre *conditions* (either Classical, Blues, or Control). In the Classical Music Genre condition, the participants were asked to listen to 15 minutes of Classical music when they first wake up for one week. Likewise, in the Blues Music Genre condition, the participants were asked to listen to 15 minutes of Blues music when they first wake up for one week. In the *control condition*, participants were not asked to listen to any music for the week.

At the end of the week, we measured (in a *post-test*) the Well-Being of each participant again using the same 1-7 *self-report* measure.

**Recall** that this is an *experiment* because we are *manipulating* our *independent variable* (Music Genre) and *randomly assigning* participants to *conditions* (*levels* of the independent variable). To make sure you are clear on all of these terms, review your PSYCH 291 notes.

## IV, DV, Conditions

In this dataset, the *independent variable (IV)* is Music Genre (either Classical, Blues, or Control *conditions*). The *dependent variable* is self-report Well-Being (from 1-7). We are also *controlling for* Coffee Consumption.

## Dataset

**Using R:** To load a datafile using R, we can use the following code.
```{r dataload2}
# In R, or other programming languages, we can assign values
# to variables just like you would in research.
#
# In this case, we are assigning the contents of the datafile
# on my computer to a variable called "wellbeing_intervention_data"
# using the "<-" (assignment) operator.
wellbeing_intervention_data <- read.csv("wellbeing_intervention_data.csv")
```

At the end of the week, these are the data we collected.

**Using R: ** To display a table of data, simply type the name of the variable like so!
```{r datatable}
wellbeing_intervention_data
```

The columns of this data table are *Participant*, *Coffess* (the number of cups that each participant reporting consuming daily), *Music* (the condition; one of *Classical*, *Blues*, or *Control*), *Baseline_WB* (the level of Well-Being each participant reported at the beginning of the experiment; between 1 and 7), and *Post_WB* (the level of Well-Being reported at the end of the week-long intervention).

# Questions

So what are some *research questions* that we might want to answer?

1. **"Does Blues music *cause* university students to experience different levels of well-being than Classical music?"**
2. **"Does one week of classical music *lead to* greater reported well-being?"**

**Note** that *lead to* is another way to make a causal claim.

**Recall** that we can make a *causal claim* because our data are *experimental* (and abides by the 3 rules for causal claims). If you're unsure why this means that we can make a causal claim, look back on your PSYCH 291 notes.

How do we answer these questions?

# Hypothesis Testing

Put simply, **hypothesis testing** is a way to test whether a *hypothesis* we make about a *population* is true or false.

The only way to prove *for certain* that different music genres lead to different levels of well-being in the population of university students would be to experiment with *every* university student in the world (the entire population). It's not exactly reasonable for us to do that, so we have to settle for a best guess about what the sample data are telling us.

This is a new type of statistic (and a very powerful one). Before, we had to settle for descriptions of our sample (What is the mean? The median? The standard deviation?) These were called **descriptive statistics** because they described the sample of data exactly. For example, in our dataset above, the average number of coffees that the participants reportedly drink per day is exactly (rounded) `M = 2.389` and the number of participants in the experiment are `N = 18`. These statistics exactly describe aspects of our sample.

**Using R:** We can use R, for example, to find the well-being mean (descriptive statistic) for participants before and after a treatment of classical music.
```{r datadescriptives}
# subset selects only the rows of our wellbeing_intervention_data table
# that meet the criteria (Music must equal "Classical"). We then make a
# new variable called "classical_participants" that contains only that data.
classical_participants <- subset(wellbeing_intervention_data, Music == "Classical")

# Next, we can calculate means of the Baseline_WB and Post_WB columns
# (and assign those means to numerical variables)!
classical_baseline_wellbeing_M <- mean(classical_participants$Baseline_WB)
classical_post_wellbeing_M <- mean(classical_participants$Post_WB)

# We can even "print" (display) the results for all to see like so:
print(paste0("Before the intervention, the classical condition reported an average well-being of ", classical_baseline_wellbeing_M, ". After the intervention, these same participants reported an average well-being of ", classical_post_wellbeing_M, "."))
```

This shows us that well-being is higher on average in our sample after the weeklong intervention for the Classical group. But does this mean we have enough information to confirm our second research question ("Does one week of classical music *lead to* greater reported well-being?") No.

In the case of *hypothesis testing*, we cannot look at our sample and say for certain that "yes, one week of listening to classical music leads to greater well-being in the *population*" because there is no way to know this about the population for certain just based on our sample; any sample has *sampling error*. We're also moving away from descriptive statistics with this research question because we are no longer looking to *describe* our sample, we are looking to *infer* conclusions from the sample about the population.

We need to test our hypotheses using **inferential statistics**: *inferences* we make about the *population* using our sample. These statistics are no longer 'facts'! These are guesses about what our sample is saying based on probability.

# The Hypothesis

When we are testing our hypothesis, we talk about the *null hypothesis* and the *alternative hypothesis*.

The **null hypothesis**, written $H_0$, is the hypothesis that this difference does not exist. In mathematical terms, we might say that one group is *equal* to the other group. In our exmple, The *null hypothesis* is that "there is no population difference in well-being b## etween baseline and after the Classical music intervention."

The **alternative hypothesis**, written $H_1$, is the hypothesis that there is a difference. In mathematical terms, we might say that one group is *not equal* to the other group. In our exmple, The *alternative hypothesis* is that "there is a population difference in well-being between baseline and after the Classical music intervention."

# The *t* Statistic

**Question:** How do we know if there is a difference between two groups?

You might be wondering if we can just simply compare the sample means of both groups and see if they're the same or not. This doesn't really work.

For our example,
$H_0$ = "no population difference in well-being between baseline and post-classical music intervention."
$H_1$ = "there is a population difference in well-being between baseline and post-lassical music intervention."

We know that the average well-being of the sample before the Classical music intervention was `r classical_baseline_wellbeing_M` (the 'pre-test' group). We also know that after a week of classical music the mean was found to be `r classical_post_wellbeing_M` (the 'post-test' group) in the sample. We can see that the two are different by `r (classical_post_wellbeing_M - classical_baseline_wellbeing_M)`. So we *know for a fact* that the means in the *sample* are different.

But that's not what we're asking. We're asking if these means are different in the *population*. This is a trickier question because we did not survey the entire population of students (of course).

## Remember *z*-Score?

Remember the *z*-Score from previous units?

$$Z = \frac{x-\mu}{\sigma}$$

